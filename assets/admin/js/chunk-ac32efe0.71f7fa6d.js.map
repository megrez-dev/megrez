{"version":3,"sources":["webpack:///./src/views/links/Links.vue?86c1","webpack:///./src/views/links/Links.vue?c61b","webpack:///src/views/links/Links.vue","webpack:///./src/views/links/Links.vue?5f65","webpack:///./src/views/links/Links.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","slot","attrs","ref","model","value","link","callback","$$v","$set","expression","minRows","mode","on","handleClickAdd","_v","_e","handleClickUpdate","handleClickReturn","links","columns","isLoading","pagination","rehandleChange","scopedSlots","_u","key","fn","row","staticClass","staticStyle","url","_s","logo","name","priority","slotProps","$event","handleClickEdit","handleClickDelete","staticRenderFns","data","description","colKey","title","width","fixed","tableLayout","rowClassName","current","pageSize","methods","post","then","catch","get","params","pageNum","total","delete","put","clearForm","components","PageView","component"],"mappings":"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","file":"js/chunk-ac32efe0.71f7fa6d.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Links.vue?vue&type=style&index=0&id=587ef8a0&prod&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('PageView',[_c('template',{slot:\"content\"},[_c('t-row',[_c('t-col',{attrs:{\"flex\":'34%'}},[_c('t-card',{attrs:{\"title\":\"添加友链\",\"bordered\":false,\"header-bordered\":\"\"}},[_c('t-form',{ref:\"form\",attrs:{\"labelAlign\":\"top\",\"colon\":true}},[_c('t-form-item',{attrs:{\"label\":\"网站名称\",\"name\":\"name\"}},[_c('t-input',{model:{value:(_vm.link.name),callback:function ($$v) {_vm.$set(_vm.link, \"name\", $$v)},expression:\"link.name\"}})],1),_c('t-form-item',{attrs:{\"label\":\"网站地址\",\"name\":\"url\"}},[_c('t-input',{attrs:{\"placeholder\":\"http://\"},model:{value:(_vm.link.url),callback:function ($$v) {_vm.$set(_vm.link, \"url\", $$v)},expression:\"link.url\"}})],1),_c('t-form-item',{attrs:{\"label\":\"Logo\",\"name\":\"logo\"}},[_c('t-input',{model:{value:(_vm.link.logo),callback:function ($$v) {_vm.$set(_vm.link, \"logo\", $$v)},expression:\"link.logo\"}})],1),_c('t-form-item',{attrs:{\"label\":\"排序\",\"name\":\"priority\"}},[_c('t-input-number',{attrs:{\"theme\":\"row\"},model:{value:(_vm.link.priority),callback:function ($$v) {_vm.$set(_vm.link, \"priority\", $$v)},expression:\"link.priority\"}})],1),_c('t-form-item',{attrs:{\"label\":\"网站描述\",\"name\":\"description\"}},[_c('t-textarea',{attrs:{\"autosize\":{ minRows: 3 }},model:{value:(_vm.link.description),callback:function ($$v) {_vm.$set(_vm.link, \"description\", $$v)},expression:\"link.description\"}})],1)],1),_c('template',{slot:\"footer\"},[(_vm.mode === 'add')?_c('t-button',{attrs:{\"theme\":\"primary\"},on:{\"click\":_vm.handleClickAdd}},[_vm._v(\" 添加 \")]):_vm._e(),(_vm.mode === 'edit')?_c('t-button',{attrs:{\"theme\":\"primary\"},on:{\"click\":_vm.handleClickUpdate}},[_vm._v(\" 更新 \")]):_vm._e(),(_vm.mode === 'edit')?_c('t-button',{attrs:{\"theme\":\"primary\",\"variant\":\"dashed\"},on:{\"click\":_vm.handleClickReturn}},[_vm._v(\" 返回添加 \")]):_vm._e()],1)],2)],1),_c('t-col',{attrs:{\"flex\":'1%'}}),_c('t-col',{attrs:{\"flex\":'65%'}},[_c('t-card',{attrs:{\"title\":\"友链列表\",\"bordered\":false,\"header-bordered\":\"\"}},[_c('t-table',{attrs:{\"data\":_vm.links,\"columns\":_vm.columns,\"rowKey\":\"id\",\"verticalAlign\":\"middle\",\"loading\":_vm.isLoading,\"pagination\":_vm.pagination},on:{\"change\":_vm.rehandleChange},scopedSlots:_vm._u([{key:\"url\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('a',{staticClass:\"t-button-link\",staticStyle:{\"text-overflow\":\"ellipsis\"},attrs:{\"href\":row.url,\"target\":\"_blank\"}},[_vm._v(_vm._s(row.url))])]}},{key:\"logo\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('div',{staticClass:\"logo-wrapper\"},[_c('img',{attrs:{\"src\":row.logo,\"alt\":row.name}})])]}},{key:\"priority\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('t-badge',{attrs:{\"count\":row.priority,\"shape\":\"round\",\"offset\":[-14, -5],\"showZero\":\"\"}})]}},{key:\"op\",fn:function(slotProps){return [_c('a',{staticClass:\"t-button-link\",on:{\"click\":function($event){return _vm.handleClickEdit(slotProps)}}},[_vm._v(\"编辑\")]),_c('t-divider',{attrs:{\"layout\":\"vertical\"}}),_c('a',{staticClass:\"t-button-link\",on:{\"click\":function($event){return _vm.handleClickDelete(slotProps)}}},[_vm._v(\"删除\")])]}}])})],1)],1)],1)],1)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <PageView>\n    <template slot=\"content\">\n      <t-row>\n        <t-col :flex=\"'34%'\">\n          <t-card title=\"添加友链\" :bordered=\"false\" header-bordered>\n            <t-form ref=\"form\" labelAlign=\"top\" :colon=\"true\">\n              <t-form-item label=\"网站名称\" name=\"name\">\n                <t-input v-model=\"link.name\"></t-input>\n              </t-form-item>\n              <t-form-item label=\"网站地址\" name=\"url\">\n                <t-input v-model=\"link.url\" placeholder=\"http://\"></t-input>\n              </t-form-item>\n              <t-form-item label=\"Logo\" name=\"logo\">\n                <t-input v-model=\"link.logo\"></t-input>\n              </t-form-item>\n              <t-form-item label=\"排序\" name=\"priority\">\n                <t-input-number\n                  v-model=\"link.priority\"\n                  theme=\"row\"\n                ></t-input-number>\n              </t-form-item>\n              <t-form-item label=\"网站描述\" name=\"description\">\n                <t-textarea\n                  v-model=\"link.description\"\n                  :autosize=\"{ minRows: 3 }\"\n                />\n              </t-form-item>\n            </t-form>\n            <template slot=\"footer\">\n              <t-button\n                theme=\"primary\"\n                @click=\"handleClickAdd\"\n                v-if=\"mode === 'add'\"\n              >\n                添加\n              </t-button>\n              <t-button\n                theme=\"primary\"\n                @click=\"handleClickUpdate\"\n                v-if=\"mode === 'edit'\"\n              >\n                更新\n              </t-button>\n              <t-button\n                theme=\"primary\"\n                variant=\"dashed\"\n                @click=\"handleClickReturn\"\n                v-if=\"mode === 'edit'\"\n              >\n                返回添加\n              </t-button>\n            </template>\n          </t-card>\n        </t-col>\n        <t-col :flex=\"'1%'\"> </t-col>\n        <t-col :flex=\"'65%'\">\n          <t-card title=\"友链列表\" :bordered=\"false\" header-bordered>\n            <t-table\n              :data=\"links\"\n              :columns=\"columns\"\n              rowKey=\"id\"\n              verticalAlign=\"middle\"\n              :loading=\"isLoading\"\n              :pagination=\"pagination\"\n              @change=\"rehandleChange\"\n            >\n              <template #url=\"{ row }\">\n                <a\n                  class=\"t-button-link\"\n                  :href=\"row.url\"\n                  target=\"_blank\"\n                  style=\"text-overflow: ellipsis\"\n                  >{{ row.url }}</a\n                >\n              </template>\n              <template #logo=\"{ row }\">\n                <div class=\"logo-wrapper\">\n                  <img :src=\"row.logo\" :alt=\"row.name\" />\n                </div>\n              </template>\n              <template #priority=\"{ row }\">\n                <t-badge\n                  :count=\"row.priority\"\n                  shape=\"round\"\n                  :offset=\"[-14, -5]\"\n                  showZero\n                >\n                </t-badge>\n              </template>\n              <template #op=\"slotProps\">\n                <a class=\"t-button-link\" @click=\"handleClickEdit(slotProps)\"\n                  >编辑</a\n                >\n                <t-divider layout=\"vertical\" />\n                <a class=\"t-button-link\" @click=\"handleClickDelete(slotProps)\"\n                  >删除</a\n                >\n              </template>\n            </t-table>\n          </t-card>\n        </t-col>\n      </t-row>\n    </template>\n  </PageView>\n</template>\n\n<script>\nimport PageView from \"@/layouts/PageView\";\nexport default {\n  name: \"Links\",\n  data() {\n    return {\n      mode: \"add\",\n      link: {\n        name: \"\",\n        url: \"\",\n        logo: \"\",\n        priority: 0,\n        description: \"\",\n      },\n      links: [],\n      isLoading: false,\n      columns: [\n        {\n          colKey: \"name\",\n          title: \"名称\",\n          width: \"150px\",\n        },\n        {\n          colKey: \"url\",\n          title: \"URL\",\n        },\n        {\n          colKey: \"logo\",\n          title: \"LOGO\",\n          width: \"100px\",\n        },\n        {\n          colKey: \"priority\",\n          title: \"排序\",\n          width: \"100px\",\n        },\n        {\n          fixed: \"right\",\n          colKey: \"op\",\n          title: \"操作\",\n        },\n      ],\n      tableLayout: \"auto\",\n      rowClassName: \"property-class\",\n      pagination: {\n        current: 1,\n        pageSize: 5,\n      },\n    };\n  },\n  async mounted() {\n    await this.fetchData(this.pagination);\n  },\n\n  methods: {\n    handleClickAdd() {\n      //validate\n      if (this.link.name === \"\") {\n        this.$message.warning(\"名称不能为空\");\n        return;\n      }\n      if (this.link.url === \"\") {\n        this.$message.warning(\"URL不能为空\");\n        return;\n      }\n      if (this.link.logo === \"\") {\n        this.$message.warning(\"LOGO不能为空\");\n        return;\n      }\n      this.$request\n        .post(\"link\", this.link)\n        .then((res) => {\n          this.$message.success(\"添加成功\");\n          this.links.push(res.data);\n          this.clearForm();\n        })\n        .catch(() => {\n          this.$message.warning(\"添加失败\");\n        });\n    },\n    async fetchData(pagination = this.pagination) {\n      try {\n        this.isLoading = true;\n        this.$request\n          .get(\"links\", {\n            params: {\n              pageNum: pagination.current,\n              pageSize: pagination.pageSize,\n            },\n          })\n          .then((res) => {\n            this.isLoading = false;\n            this.links = res.data.list;\n            this.pagination = {\n              ...pagination,\n              total: res.data.total,\n            };\n          });\n      } catch (err) {\n        this.links = [];\n      }\n    },\n    // 也可以使用 page-change 事件\n    async rehandleChange(changeParams) {\n      const { current, pageSize } = changeParams.pagination;\n      const pagination = { current, pageSize };\n      await this.fetchData(pagination);\n    },\n    handleClickEdit({ row }) {\n      this.mode = \"edit\";\n      this.link = { ...row };\n    },\n    handleClickDelete({ row }) {\n      this.$request\n        .delete(\"link/\" + row.id)\n        .then(() => {\n          this.$message.info(\"删除成功\");\n          for (let i = 0; i < this.links.length; i++) {\n            if (this.links[i].id === row.id) {\n              this.links.splice(i, 1);\n              break;\n            }\n          }\n        })\n        .catch(() => {\n          this.$message.error(\"删除失败\");\n        });\n    },\n    handleClickUpdate() {\n      //validate\n      if (this.link.name === \"\") {\n        this.$message.warning(\"名称不能为空\");\n        return;\n      }\n      if (this.link.url === \"\") {\n        this.$message.warning(\"URL不能为空\");\n        return;\n      }\n      if (this.link.logo === \"\") {\n        this.$message.warning(\"LOGO不能为空\");\n        return;\n      }\n      this.$request\n        .put(\"link/\" + this.link.id, this.link)\n        .then(() => {\n          this.$message.info(\"更新成功\");\n          this.mode = \"add\";\n          this.clearForm();\n          this.fetchData();\n        })\n        .catch(() => {\n          this.$message.error(\"更新失败\");\n        });\n    },\n    handleClickReturn() {\n      this.mode = \"add\";\n      this.clearForm();\n    },\n    clearForm() {\n      this.link.id = 0;\n      this.link.name = \"\";\n      this.link.url = \"\";\n      this.link.logo = \"\";\n      this.link.priority = 0;\n      this.link.description = \"\";\n    },\n  },\n  components: {\n    PageView,\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.logo-wrapper {\n  width: 40px;\n  height: 40px;\n  background: #eeeeee;\n  border-radius: 2px;\n  img {\n    margin: auto;\n    width: 100%;\n    height: 100%;\n    border-radius: 2px;\n  }\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Links.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Links.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Links.vue?vue&type=template&id=587ef8a0&scoped=true&\"\nimport script from \"./Links.vue?vue&type=script&lang=js&\"\nexport * from \"./Links.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Links.vue?vue&type=style&index=0&id=587ef8a0&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"587ef8a0\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}