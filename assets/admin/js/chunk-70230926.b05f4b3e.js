(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-70230926"],{"00e0":function(t,e,a){"use strict";a("1c53")},"1c53":function(t,e,a){},"9a22":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("PageView",[a("template",{slot:"header"},[a("div",{staticClass:"page-header-bar"},[a("div",{staticClass:"page-header-bar-text"},[a("span",{staticClass:"page-header-bar-title"},[t._v("基础设置")])]),a("span",{staticClass:"page-header-bar-operator"},[a("span",{staticClass:"page-header-bar-operator-item"},[a("t-button",{attrs:{theme:"primary",variant:"base",loading:t.saveBtnLoading},on:{click:t.onClickSave}},[t._v("保存设置")])],1)])])]),a("template",{slot:"content"},[a("div",{staticClass:"settings-container"},[a("t-tabs",{attrs:{defaultValue:"basic"}},[a("t-tab-panel",{attrs:{value:"basic"},scopedSlots:t._u([{key:"label",fn:function(){return[a("icon",{staticStyle:{"margin-right":"4px"},attrs:{name:"setting"}}),t._v(" 基本设置 ")]},proxy:!0}])},[a("div",{staticClass:"settings-form-container"},[a("t-form",{ref:"form",attrs:{labelAlign:"top",colon:!0}},[a("t-form-item",{attrs:{label:"博客标题",name:"blogTitle"}},[a("t-input",{model:{value:t.settings.basic.blogTitle,callback:function(e){t.$set(t.settings.basic,"blogTitle",e)},expression:"settings.basic.blogTitle"}})],1),a("t-form-item",{attrs:{label:"博客简介",name:"blogDescription"}},[a("t-textarea",{attrs:{placeholder:"一句简短的话描述你的博客",autosize:{minRows:2}},model:{value:t.settings.basic.blogDescription,callback:function(e){t.$set(t.settings.basic,"blogDescription",e)},expression:"settings.basic.blogDescription"}})],1),a("t-form-item",{attrs:{label:"博客地址",name:"blogURL"}},[a("t-input",{attrs:{placeholder:"http://"},model:{value:t.settings.basic.blogURL,callback:function(e){t.$set(t.settings.basic,"blogURL",e)},expression:"settings.basic.blogURL"}})],1),a("t-form-item",{attrs:{label:"Favicon",name:"blogFavicon"}},[a("t-input-group",{attrs:{separate:""}},[a("t-input",{style:{width:"500px"},attrs:{clearable:""},model:{value:t.settings.basic.blogFavicon,callback:function(e){t.$set(t.settings.basic,"blogFavicon",e)},expression:"settings.basic.blogFavicon"}}),a("t-button",{attrs:{theme:"primary",shape:"square",variant:"outline"},on:{click:function(e){return t.openFaviconSelectDrawer()}}},[a("image-icon",{attrs:{slot:"icon"},slot:"icon"})],1)],1)],1)],1)],1)]),a("t-tab-panel",{attrs:{value:"attachment"},scopedSlots:t._u([{key:"label",fn:function(){return[a("icon",{staticStyle:{"margin-right":"4px"},attrs:{name:"image"}}),t._v(" 附件设置 ")]},proxy:!0}])},[a("div",{staticClass:"settings-form-container"},[a("t-form",{ref:"form",attrs:{labelAlign:"top",colon:!0}},[a("t-form-item",{attrs:{label:"上传位置"}},[a("t-select",{attrs:{options:t.uploadTypeOptions},model:{value:t.settings.attachment.uploadType,callback:function(e){t.$set(t.settings.attachment,"uploadType",e)},expression:"settings.attachment.uploadType"}})],1),"qcloud_cos"===t.settings.attachment.uploadType?a("t-form-item",{attrs:{label:"secretID"}},[a("t-input",{model:{value:t.settings.attachment.qCloudCos.secretID,callback:function(e){t.$set(t.settings.attachment.qCloudCos,"secretID",e)},expression:"settings.attachment.qCloudCos.secretID"}})],1):t._e(),"qcloud_cos"===t.settings.attachment.uploadType?a("t-form-item",{attrs:{label:"secretKey"}},[a("t-input",{model:{value:t.settings.attachment.qCloudCos.secretKey,callback:function(e){t.$set(t.settings.attachment.qCloudCos,"secretKey",e)},expression:"settings.attachment.qCloudCos.secretKey"}})],1):t._e(),"qcloud_cos"===t.settings.attachment.uploadType?a("t-form-item",{attrs:{label:"域名"}},[a("t-input",{model:{value:t.settings.attachment.qCloudCos.domain,callback:function(e){t.$set(t.settings.attachment.qCloudCos,"domain",e)},expression:"settings.attachment.qCloudCos.domain"}})],1):t._e(),"qcloud_cos"===t.settings.attachment.uploadType?a("t-form-item",{attrs:{label:"上传路径"}},[a("t-input",{attrs:{placeholder:"如：blog/images"},model:{value:t.settings.attachment.qCloudCos.path,callback:function(e){t.$set(t.settings.attachment.qCloudCos,"path",e)},expression:"settings.attachment.qCloudCos.path"}})],1):t._e(),a("t-form-item",["qcloud_cos"===t.settings.attachment.uploadType?a("t-button",{on:{click:t.pingQcloudCos}},[t._v("测试连接")]):t._e()],1)],1)],1)])],1),a("AttachSelectDrawer",{ref:"faviconSelectDrawer",attrs:{mode:"single",visible:t.faviconSelectDrawerVisiable},on:{"update:visible":function(e){t.faviconSelectDrawerVisiable=e},select:t.selectFavicon}})],1)])],2)},i=[],n=a("f646"),o=a("c8e4"),l=a("f06c"),c=a("c8c3"),r={name:"Settings",data(){return{saveBtnLoading:!1,faviconSelectDrawerVisiable:!1,settings:{basic:{blogTitle:"",blogDescription:"",blogURL:"",blogFavicon:""},attachment:{uploadType:"local",qCloudCos:{secretID:"",secretKey:"",domain:"",path:""}}},uploadTypeOptions:[{value:"local",label:"本地"},{value:"qcloud_cos",label:"腾讯云 COS"}]}},methods:{pingQcloudCos(){this.$request.post("upload/qcloudcos/ping",this.settings.attachment.qCloudCos).then(()=>{this.$message.success("连接成功")})},onClickSave(){this.saveBtnLoading=!0,this.$request.put("settings",this.settings).then(()=>{this.$message.success("保存成功")}).finally(()=>{this.saveBtnLoading=!1})},fetchSettings(){this.$request.get("settings").then(t=>{this.settings=t.data})},openFaviconSelectDrawer(){this.faviconSelectDrawerVisiable=!0},selectFavicon(t){this.settings.basic.blogFavicon=t.url}},beforeMount(){this.fetchSettings()},components:{Icon:n["a"],ImageIcon:o["a"],AttachSelectDrawer:l["a"],PageView:c["a"]}},u=r,p=(a("00e0"),a("2877")),g=Object(p["a"])(u,s,i,!1,null,"780d90ed",null);e["default"]=g.exports}}]);
//# sourceMappingURL=chunk-70230926.b05f4b3e.js.map